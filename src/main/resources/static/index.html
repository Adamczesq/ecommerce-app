<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mój Sklep</title>
    <style>
        body { font-family: sans-serif; max-width: 800px; margin: 40px auto; color: #333; }
        h1 { border-bottom: 2px solid #eee; padding-bottom: 10px; }
        #productList { list-style: none; padding: 0; }
        #productList li { border: 1px solid #ddd; margin-bottom: 10px; padding: 15px; border-radius: 5px; }
        #productList li strong { font-size: 1.2em; }
    </style>
</head>
<body>

<h1>Lista Produktów</h1>
<ul id="productList">
</ul>

<script>
    async function fetchProducts() {
        const productListElement = document.getElementById('productList');
        productListElement.innerHTML = '<li>Ładowanie produktów...</li>';

        try {
            const response = await fetch('/api/products');

            if (!response.ok) {
                throw new Error(`Błąd HTTP! Status: ${response.status}`);
            }

            const products = await response.json();

            productListElement.innerHTML = '';
            if (products.length === 0) {
                productListElement.innerHTML = '<li>Brak produktów do wyświetlenia.</li>';
                return;
            }

            products.forEach(product => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `
                        <strong>${product.name}</strong><br>
                        Cena: ${product.price.toFixed(2)} PLN<br>
                        Ilość w magazynie: ${product.quantity}
                    `;
                productListElement.appendChild(listItem);
            });

        } catch (error) {
            console.error('Nie udało się pobrać produktów:', error);
            productListElement.innerHTML = '<li>Wystąpił błąd podczas ładowania produktów.</li>';
        }
    }

    document.addEventListener('DOMContentLoaded', fetchProducts);
</script>

</body>
</html>